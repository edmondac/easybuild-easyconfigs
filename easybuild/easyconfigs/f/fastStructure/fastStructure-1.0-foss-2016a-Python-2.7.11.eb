easyblock = 'CmdCp'

name = 'fastStructure'
version = '1.0'
versionsuffix = '-Python-%(pyver)s'

homepage = 'http://rajanil.github.io/fastStructure/'
description = """
fastStructure is an algorithm for inferring population structure 
from large SNP genotype data. It is based on a variational Bayesian 
framework for posterior inference and is written in Python2.x. 
"""

toolchain = {'name': 'foss', 'version': '2016a'}

source_urls = ['https://github.com/rajanil/fastStructure/archive/']
sources = ['v%(version)s.tar.gz']

dependencies = [
    ('Python', '2.7.11'),
    ('GSL', '2.1'),
]

cmds_map = [('.*', 'cd vars && python setup.py build_ext --inplace && cd .. && python setup.py build_ext --inplace')]

files_to_copy = [
   (['*'], '.'),
]

postinstallcmds = [
    'echo "#!/bin/env python" | cat - %(installdir)s/structure.py > temp && mv temp %(installdir)s/structure.py', 
    'chmod +x %(installdir)s/structure.py'
]

modextrapaths = {'PATH': ['']}

sanity_check_paths = {
    'files': ['structure.py'],
    'dirs': ['vars'],
}

moduleclass = 'bio'
