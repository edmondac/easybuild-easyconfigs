easyblock = 'MakeCp'

name = 'pplacer'
version = '1.1.alpha16'

homepage = 'http://matsen.fhcrc.org/pplacer/'
description = """Pplacer places query sequences on a fixed reference phylogenetic tree to maximize phylogenetic
 likelihood or posterior probability according to a reference alignment. Pplacer is designed to be fast, to give
 useful information about uncertainty, and to offer advanced visualization and downstream analysis."""

toolchain = {'name': 'ictce', 'version': '5.5.0'}

source_urls = ['https://github.com/matsen/pplacer/archive/']
sources = ['v%(version)s.tar.gz']

ocaml = 'OCaml'
ocamlver = '4.01.0'
versionsuffix = '-%s-%s' % (ocaml, ocamlver)
builddependencies = [('findlib', '1.5.2', versionsuffix)]
dependencies = [
    ('zlib', '1.2.7'),
    (ocaml, ocamlver),
    ('batteries', '2.2', versionsuffix),
    ('CamlZIP', '1.05', versionsuffix),
    ('GSL-OCaml', '0.6.3', versionsuffix),
    ('csv', '1.3.3', versionsuffix),
    ('SQLite3-OCaml', '2.0.6', versionsuffix),
    ('Xmlm', '1.2.0', versionsuffix),
    ('MCL', '12-068oasis4', versionsuffix),
]

prebuildopts = "echo 'let version = \"v1.1.alpha16-9-g78ea126\"\n' > common_src/version.ml && "
parallel = 1

files_to_copy = ['bin']

sanity_check_paths = {
    'files': ['bin/guppy', 'bin/pplacer', 'bin/rppr'],
    'dirs': [],
}

moduleclass = 'bio'
