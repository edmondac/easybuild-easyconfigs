easyblock = 'CMakeMake'

name = 'ParallelIO'
version = '2.2.2a'

homepage = 'https://github.com/NCAR/ParallelIO'
description = """A high-level Parallel I/O Library for structured grid applications"""

toolchain = {'name': 'intel', 'version': '2017a'}
toolchainopts = {'usempi': True}

# underscore = "${version//./_}"           bash substition like this 
# sources = ['pio%(underscore)s.tar.gz']    in an easyconfig file ?
sources = ['pio2_2_2a.tar.gz']
source_urls = ['https://github.com/NCAR/ParallelIO/archive/']
checksums = ['052a03e8e3b5ac244dc53b397a9920af3066efffa216ea7f8e5e4ac73a8b8033']

separate_build_dir = True

dependencies = [
  ('PnetCDF', '1.8.1', '', ('intel', '2017a')),
  ('netCDF-Fortran', '4.4.4', '', ('intel', '2017a'))
]

builddependencies = [
  ('CMake', '3.8.2', '', ('GCCcore', '6.3.0')),
]

configopts = "-DPIO_ENABLE_TIMING=OFF "

sanity_check_paths = {
    'files': [],
    'dirs': [('include','lib')]
}

modextravars = {
    'PIO': '%(installdir)s',
}

moduleclass = 'data'
