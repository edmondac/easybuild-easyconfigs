easyblock = 'PythonPackage'

name = 'EggLib'
version = '2.1.10'

homepage = 'http://egglib.sourceforge.net/'
description = """EggLib is a C++/Python library and program package for evolutionary genetics and genomics."""

toolchain = {'name': 'intel', 'version': '2015b'}

source_urls = [SOURCEFORGE_SOURCE]
sources = [
    '%(namelower)s-cpp-%(version)s.tar.gz',
    '%(namelower)s-py-%(version)s.tar.gz',
]

dependencies = [
    ('Python', '2.7.11'),
    ('GSL', '2.1'),
]

# also install C++ part
prebuildopts = "cd %(builddir)s/egglib-cpp-%(version)s && ./configure --prefix=%(installdir)s && make && make install && "
# header files must be found when building Python library
prebuildopts += "cd %(builddir)s/egglib-py-%(version)s && CPATH=%(installdir)s/include LIBRARY_PATH=%(installdir)s/lib "

keeppreviousinstall = True
preinstallopts = "cd %(builddir)s/egglib-py-%(version)s && CPATH=%(installdir)s/include "
installopts = "--install-lib %(installdir)s/lib/python2.7/site-packages --install-scripts %(installdir)s/bin"

sanity_check_paths = {
    'files': ['bin/egglib', 'lib/libegglib-cpp.a'],
    'dirs': ['include/egglib-cpp', 'lib/python2.7/site-packages'],
}

moduleclass = 'bio'
