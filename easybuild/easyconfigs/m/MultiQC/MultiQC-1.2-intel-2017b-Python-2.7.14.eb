# This file is an EasyBuild reciPY as per https://github.com/easybuilders/easybuild
# Adam Huffman
# The Francis Crick Institute
# Elements derived from work by Pablo Escobar
# sciCORE - University of Basel
# SIB Swiss Institute of Bioinformatics 

easyblock = 'Bundle'

name = 'MultiQC'
version = '1.2'
versionsuffix = '-Python-%(pyver)s'

homepage = 'http://multiqc.info'
description = """Aggregate results from bioinformatics analyses across many samples into a single 
 report.

 MultiQC searches a given directory for analysis logs and compiles a HTML report. It's a general
 use tool, perfect for summarising the output from numerous bioinformatics tools."""

toolchain = {'name': 'intel', 'version': '2017b'}

dependencies = [
    ('Python', '2.7.14'),
    ('matplotlib', '2.1.0', versionsuffix),
    ('PyYAML', '3.12', versionsuffix),
]

exts_defaultclass = 'PythonPackage'

exts_list = [
    ('MarkupSafe', '1.0', {
        'source_urls': ['https://pypi.python.org/packages/source/m/markupsafe'],
        'checksums': [
            'a6be69091dac236ea9c6bc7d012beab42010fa914c459791d627dad4910eb665',  # MarkupSafe-1.0.tar.gz
        ],
    }),
    ('click', '6.7', {
        'source_urls': ['https://pypi.python.org/packages/source/c/click/'],
        'checksums': [
            'f15516df478d5a56180fbf80e68f206010e6d160fc39fa508b65e035fd75130b',  # click-6.7.tar.gz
        ],
    }),
    ('simplejson', '3.11.1', {
        'source_urls': ['https://pypi.python.org/packages/source/s/simplejson/'],
        'checksums': [
            '01a22d49ddd9a168b136f26cac87d9a335660ce07aa5c630b8e3607d6f4325e7',  # simplejson-3.11.1.tar.gz
        ],
    }),
    ('Jinja2', '2.9.6', {
        'source_urls': ['https://pypi.python.org/packages/source/J/Jinja2/'],
        'checksums': [
            'ddaa01a212cd6d641401cb01b605f4a4d9f37bfc93043d7f760ec70fb99ff9ff',  # Jinja2-2.9.6.tar.gz
        ],
    }),
    ('multiqc', version, {
        'source_urls': ['https://pypi.python.org/packages/source/m/multiqc/'],
        'checksums': [
            '63544cc06c235a4a8ec5eb17425bf660c497cefe9d81cb8f6e621e53fddb5a0c',  # multiqc-1.2.tar.gz
        ],
    }),
]

full_sanity_check = True

sanity_check_paths = {
    'files': ['bin/multiqc'],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

modextrapaths = {'PYTHONPATH': ['lib/python%(pyshortver)s/site-packages']}

moduleclass = 'bio'
