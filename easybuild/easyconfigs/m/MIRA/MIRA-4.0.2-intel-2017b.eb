easyblock = 'ConfigureMake'

name = 'MIRA'
version = '4.0.2'

homepage = 'https://sourceforge.net/projects/mira-assembler/'
description = "Sequence assembler and sequence mapping for whole genome shotgun and EST / RNASeq sequencing data."

toolchain = {'name': 'intel', 'version': '2017b'}

source_urls = ['https://downloads.sourceforge.net/project/mira-assembler/MIRA/stable/']
sources = [SOURCELOWER_TAR_BZ2]
#patches = ['MIRA-4.9.6_icc.patch']
patches = ['MIRA-%(version)s_fix-include.patch']
checksums = [
    'a32cb2b21e0968a5536446287c895fe9e03d11d78957554e355c1080b7b92a80',  # mira-4.0.2.tar.bz2
    '390222337d96de3ca5211ce6707e0ce3a9f17df0aa10cb81dc06a7a92db5e6ea',  # MIRA-4.0.2_fix-include.patch
]

dependencies = [
    ('Boost', '1.65.1'),
    ('zlib', '1.2.11'),
    ('expat', '2.2.5'),
]

configopts = "--with-boost=$EBROOTBOOST --with-expat=$EBROOTEXPAT --with-zlib=$EBROOTZLIB"
#preinstallopts = "PATH=%(installdir)s/bin:$PATH "

sanity_check_paths = {
    'files': ['bin/mira', 'bin/mirabait', 'bin/miraconvert', 'bin/miramem'],
    'dirs': ['share/mira'],
}

moduleclass = 'bio'
